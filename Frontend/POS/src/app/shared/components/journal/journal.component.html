<div class="customer">
    <table class="customer-content">
        <th class="customer-icon">
            <mat-icon>person</mat-icon>
        </th>
        <th><mat-form-field>
                <mat-select>
                    <mat-option value="customer1">
                        Shadman
                    </mat-option>
                    <mat-option value="customer2">
                        Sakib
                    </mat-option>
                </mat-select>
            </mat-form-field></th>
        <th class="customer-icon">
            <mat-icon color="primary" class="customer-add">person_add</mat-icon>
        </th>
    </table>
</div>

<div class="search">
    <table>
        <th>
            <mat-form-field appearance="fill">
                <input matInput type="text" [formControl]="searchControl" [matAutocomplete]="auto"
                    (input)="filterItems()" placeholder="Enter product name/barcode">
                <mat-autocomplete #auto="matAutocomplete">
                    <mat-option *ngFor="let item of filteredItems" [value]="item">
                        {{ item }}
                    </mat-option>
                </mat-autocomplete>
            </mat-form-field>
        </th>
        <th>
            <mat-icon color="primary">add_shopping_cart</mat-icon>
        </th>
    </table>
</div>

<div class="item-list">
    <table class="list-header">
        <thead>
            <tr>
                <th class="item-col">Item</th>
                <th class="qty-col">Qty</th>
                <th class="price-col">Price</th>
                <th class="subtotal-col">Subtotal</th>
                <th class="delete-col"><mat-icon class="delete-icon">delete</mat-icon></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of this.productService.receiptItems">
                <td class="item-col">{{item.productName}}</td>
                <td class="qty-col">1</td>
                <td class="price-col">{{item.price}}</td>
                <td class="subtotal-col">{{item.price}}</td>
                <td class="delete-col-item"><mat-icon class="delete-icon">close</mat-icon></td>
            </tr>
        </tbody>
    </table>
</div>

<mat-card class="mat-elevation-z4">
    <div class="total">
        <mat-label>Total</mat-label>
        <mat-label>{{getTotal()}}</mat-label>
    </div>
    <div class="discount">
        <div class="apply-discount">
            <mat-checkbox [(ngModel)]="applyDiscount" (change)="onDiscountCheckboxChange()" class="discount-checkbox"
                color="primary">Apply
                Discount</mat-checkbox>
            <mat-form-field *ngIf="applyDiscount" class="discount-form">
                <input #discountInput matInput type="number" placeholder="Enter Discount" class="discount-input"
                    (input)="updatePrice(+discountInput.value, selectedUnit); ">
                <mat-select [(ngModel)]="selectedUnit"
                    (selectionChange)="updatePrice(+discountInput.value, selectedUnit)" class="unit-select">
                    <mat-option *ngFor="let unit of priceUnit" [value]="unit.amount">
                        {{unit.viewAmount}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <ng-container *ngIf="applyDiscount">
            <div class="after-discount">
                <mat-label> After Discount</mat-label>
                <mat-label> {{priceAfterDiscount}} </mat-label>
            </div>
        </ng-container>
    </div>
    <div class="cash">
        <mat-label>Cash Received</mat-label>
        <mat-form-field class="cash-form">
            <input #received matInput type="number" style="text-align: right;"
                (input)="applyDiscount ? updateChangeAmount(+received.value, +(discountInput.nativeElement.value) , selectedUnit) : updateChangeAmount(+received.value)">
        </mat-form-field>
    </div>
    <div class="change">
        <mat-label>Change Amount</mat-label>
        <mat-label>{{changeAmount}}</mat-label>
    </div>
</mat-card>

<button mat-raised-button disableRipple color="primary" class="payment"> Payment </button>